{% extends 'parent-page1.html' %}

{% block title %}
    Analytics
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="../static/analytics.css" />
    <div style="display: flex; justify-content: space-between; width: 80%; margin: 0 auto;">
        <div style="flex: 1; margin-right: 10px;">
            <canvas id="snapshotChartLocation"></canvas>
        </div>
        <div style="flex: 1; margin-left: 10px;">
            <canvas id="snapshotChartDetectionType"></canvas>
        </div>
    </div>
    <br>    <br>

    <div style="display: flex; justify-content: space-between; width: 80%; margin: 0 auto;">

        <canvas id="snapshotChartTime" style="width: 100%; height: 400px;"></canvas>
    </div>
    


    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        fetch('/get_snapshot_data')
            .then(response => response.json())
            .then(data => {
                // Chart for number of snapshots per location
                const ctxLocation = document.getElementById('snapshotChartLocation').getContext('2d');
                new Chart(ctxLocation, {
                    type: 'bar',
                    data: {
                        labels: data.labels_location,
                        datasets: [{
                            label: 'Snapshot Counts (Location)',
                            data: data.counts_location,
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // Chart for number of snapshots per day
                const ctxTime = document.getElementById('snapshotChartTime').getContext('2d');
                new Chart(ctxTime, {
                    type: 'line',
                    data: {
                        labels: data.labels_time,
                        datasets: [{
                            label: 'Snapshot Counts (Per Day)',
                            data: data.counts_time,
                            fill: false,
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
                  // Chart for number of snapshots per detection type
                  const ctxDetectionType = document.getElementById('snapshotChartDetectionType').getContext('2d');
                new Chart(ctxDetectionType, {
                    type: 'bar',
                    data: {
                        labels: data.labels_detection_type,
                        datasets: [{
                            label: 'Snapshot Counts (Detection Type)',
                            data: data.counts_detection_type,
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            });
        
    </script>
{% endblock %}


